(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(e,t,n){e.exports=n(383)},138:function(e,t,n){},367:function(e,t,n){},370:function(e,t,n){},371:function(e,t,n){},372:function(e,t,n){},374:function(e,t,n){},375:function(e,t,n){},383:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),i=n.n(o),s=(n(138),n(13)),c=n(14),u=n(18),l=n(15),d=n(17),f=n(16),p=n(7),m=n(19),h=n(66),v={modal:{width:"50%",padding:"1.6rem",borderRadius:"10px"},closeButton:{cursor:"pointer",top:"2px",right:"2px"}},b="SukSerhiy",g="\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f",E="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 e-mail",O={username:null,email:null,text:null,status:0},k=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleClose=function(){n.setState({open:!1,form:Object(m.a)({},O)})},n.handleSubmit=function(e){var t=n.props.onSubmit,a=n.state.form;n.validateForm().then(function(){t&&t(a),n.handleClose()}).catch(function(e){console.error(e.message)})};var a=n.props.data;return n.state={open:!1,form:Object(m.a)({},O,a),rules:{username:[{required:!0,message:g,trigger:"blur"}],email:[{required:!0,message:g,trigger:"blur"},{type:"email",message:E,trigger:"blur"}]}},n.formRef=r.a.createRef(),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"validateForm",value:function(){var e=this;return new Promise(function(t,n){e.formRef.current.validate(function(e){e?t():n(new Error("validate failed"))})})}},{key:"openModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.props.tasks,n=e?t.find(function(t){return t.id===e}):{};this.setState({open:!0,form:Object(m.a)({},O,n)})}},{key:"onFieldChange",value:function(e,t){var n=this.state.form;n[e]=t,this.setState({form:n})}},{key:"render",value:function(){var e=this,t=this.state,n=t.open,a=t.form,o=t.form,i=o.username,s=o.email,c=o.text,u=o.status,l=t.rules,d=this.props.editingMode;return r.a.createElement(h.a,{open:n,styles:v,onClose:this.handleClose,center:!0},r.a.createElement(p.Form,{ref:this.formRef,model:a,rules:l},r.a.createElement(p.Form.Item,{prop:"username"},r.a.createElement(p.Input,{placeholder:"Enter username",value:i,onChange:function(t){return e.onFieldChange("username",t)},disabled:!!d})),r.a.createElement(p.Form.Item,{prop:"email"},r.a.createElement(p.Input,{placeholder:"Enter email",value:s,onChange:function(t){return e.onFieldChange("email",t)},disabled:!!d})),r.a.createElement(p.Form.Item,{prop:"text"},r.a.createElement(p.Input,{type:"textarea",autosize:{minRows:2},placeholder:"Enter text",value:c,onChange:function(t){return e.onFieldChange("text",t)}})),d&&r.a.createElement(p.Form.Item,{prop:"status"},r.a.createElement(p.Select,{value:u,onChange:function(t){return e.onFieldChange("status",t)}},r.a.createElement(p.Select.Option,{value:0,label:"\u041d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"}),r.a.createElement(p.Select.Option,{value:10,label:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"}))),r.a.createElement(p.Button,{onClick:this.handleSubmit},"Save")))}}]),t}(a.Component);k.defaultProps={editingMode:!1};var S=Object(f.b)(function(e){return{tasks:e.toJS().tasks}},null,null,{forwardRef:!0})(k),j={login:null,password:null},C=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleClose=function(){n.setState({open:!1,form:Object(m.a)({},j)})},n.handleSubmit=function(){var e=n.props.onSubmit,t=n.state.form;n.validateForm().then(function(){e&&e(t),n.handleClose()}).catch(function(e){console.error(e.message)})},n.state={open:!1,form:Object(m.a)({},j),rules:{login:[{required:!0,message:g,trigger:"blur"}],password:[{required:!0,message:g,trigger:"blur"}]}},n.formRef=r.a.createRef(),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"validateForm",value:function(){var e=this;return new Promise(function(t,n){e.formRef.current.validate(function(e){e?t():n(new Error("validate failed"))})})}},{key:"openModal",value:function(){this.setState({open:!0,form:Object(m.a)({},j)})}},{key:"onFieldChange",value:function(e,t){var n=this.state.form;n[e]=t,this.setState({form:n})}},{key:"render",value:function(){var e=this,t=this.state,n=t.open,a=t.form,o=t.form,i=o.login,s=o.password,c=t.rules;return r.a.createElement(h.a,{open:n,styles:v,onClose:this.handleClose,center:!0},r.a.createElement(p.Form,{ref:this.formRef,model:a,rules:c},r.a.createElement(p.Form.Item,{prop:"login"},r.a.createElement(p.Input,{placeholder:"\u041b\u043e\u0433\u0438\u043d",value:i,onChange:function(t){return e.onFieldChange("login",t)}})),r.a.createElement(p.Form.Item,{prop:"password"},r.a.createElement(p.Input,{placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:s,onChange:function(t){return e.onFieldChange("password",t)},type:"password"})),r.a.createElement(p.Button,{onClick:this.handleSubmit},"Save")))}}]),t}(a.Component),y=function(){return function(e){e({type:"SET_AUTHORIZED"})}},F=function(){return function(e){e({type:"SET_UNAUTHORIZED"})}},D=n(67),T=n.n(D),w=function(e){return T.a.error(e,{position:"bottom",effect:"slide",timeout:2e3})},x=function(e,t){var n=e.login,a=e.password;if("admin"!==n||"123"!==a)throw new Error("\u0412\u0432\u0435\u0434\u0435\u043d\u043e \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c");t()},A=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).openModal=function(){n.modalRef.current.openModal()},n.handleLogin=function(e){var t=n.props.setAuthorized;try{x(e,t)}catch(a){console.error(a),w(a.message)}},n.handleLogout=function(){(0,n.props.setUnauthorized)()},n.modalRef=r.a.createRef(),n.state={isAuthorized:e.isAuthorized},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.state.isAuthorized!==this.props.isAuthorized&&this.setState({isAuthorized:this.props.isAuthorized})}},{key:"render",value:function(){var e=this.state.isAuthorized;return r.a.createElement(a.Fragment,null,!e&&r.a.createElement(p.Button,{onClick:this.openModal},"\u0412\u043e\u0439\u0442\u0438"),e&&r.a.createElement(p.Button,{onClick:this.handleLogout},"\u0412\u044b\u0439\u0442\u0438"),r.a.createElement(C,{ref:this.modalRef,onSubmit:this.handleLogin}))}}]),t}(a.Component),R=Object(f.b)(function(e){return{isAuthorized:e.toJS().isAuthorized}},function(e){return{setAuthorized:function(t){return e(y(t))},setUnauthorized:function(t){return e(F(t))}}})(A),_=(n(367),function(e){return r.a.createElement("header",null,r.a.createElement("h2",{className:"title"},"Test Project for BeeJee"),r.a.createElement(R,null))}),I=n(43),z=n(12),N=n.n(z),M=n(25),P={ASC:"asc",DESC:"desc"},U=(n(370),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={sortDirection:n.props.sortDirection},n.setAscending=function(){var e=n.props.onChange,t=P.ASC;n.setState({sortDirection:t}),e&&e(t)},n.setDescending=function(){var e=n.props.onChange,t=P.DESC;n.setState({sortDirection:t}),e&&e(t)},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.sortDirection;return r.a.createElement("div",{className:"sort-direction-switcher"},e===P.ASC&&r.a.createElement("div",{className:"asc",onClick:this.setDescending}),e===P.DESC&&r.a.createElement("div",{className:"desc",onClick:this.setAscending}))}}]),t}(a.Component)),J=Object(f.b)(function(e){return{sortDirection:e.toJS().sortDirection}})(U),B=(n(371),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).onSortFieldChange=function(e){var t=n.props.onFilter,a=e||null;n.setState({sortField:a}),t&&t({sortField:a})},n.onSortDirectionChange=function(e){var t=n.props.onFilter;n.setState({sortDirection:e}),t&&t({sortDirection:e})},n.state={sortField:e.sortField,sortDirection:e.sortDirection},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.sortField;return r.a.createElement("div",{className:"filter"},r.a.createElement(J,{onChange:this.onSortDirectionChange}),r.a.createElement(p.Select,{placeholder:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e...",value:e,onChange:this.onSortFieldChange,clearable:!0},r.a.createElement(p.Select.Option,{value:"username",label:"\u041f\u043e \u0438\u043c\u0435\u043d\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),r.a.createElement(p.Select.Option,{value:"email",label:"\u041f\u043e email"}),r.a.createElement(p.Select.Option,{value:"status",label:"\u041f\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0443"})))}}]),t}(a.Component)),L=Object(f.b)(function(e){var t=e.toJS();return{sortField:t.sortField,sortDirection:t.sortDirection}})(B),q=(n(372),Object(f.b)(function(e){return{isAuthorized:e.toJS().isAuthorized}})(function(e){var t=e.data,n=t.username,a=t.email,o=t.text,i=e.isAuthorized,s=e.data.status;return console.log(s),r.a.createElement("div",{className:"task"},10===s&&r.a.createElement("div",{className:"check"}),i&&r.a.createElement("div",{className:"edit-button",onClick:function(){var t=e.data.id,n=e.onEdit;e.isAuthorized&&n&&n(t)}}),r.a.createElement("div",{className:"author"},r.a.createElement("span",null,n),r.a.createElement("span",null,a)),r.a.createElement("div",{className:"text"},o))})),H=function(){var e=Object(M.a)(N.a.mark(function e(t,n){var a,r,o,i,s;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=n||{},a=Object.keys(n).reduce(function(e,t){return e+(n[t]?"&".concat(t,"=").concat(n[t]):"")},""),console.log("https://uxcandy.com/~shapoval/test-task-backend/?developer=".concat(t).concat(a)),e.next=5,fetch("https://uxcandy.com/~shapoval/test-task-backend/?developer=".concat(t).concat(a));case 5:return r=e.sent,e.next=8,r.json();case 8:if(o=e.sent,i=o.status,s=o.message,"error"!==i){e.next=12;break}throw new Error(s);case 12:return e.next=14,s;case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(M.a)(N.a.mark(function e(t,n){var a,r,o,i,s,c,u,l;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.username,r=n.email,o=n.text,(i=new FormData).append("username",a),i.append("email",r),i.append("text",o),e.next=7,fetch("https://uxcandy.com/~shapoval/test-task-backend/create?developer=".concat(t),{method:"POST",body:i});case 7:return s=e.sent,e.next=10,s.json();case 10:if(c=e.sent,u=c.status,l=c.message,"error"!==u){e.next=14;break}throw new Error(l);case 14:return e.next=16,l;case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),Z=n(129),G=n.n(Z),W=function(){var e=Object(M.a)(N.a.mark(function e(t,n,a){var r,o,i,s,c,u;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Q(a,"beejee"),o=new FormData,Object.keys(a).forEach(function(e){o.append(e,a[e])}),o.append("token","beejee"),o.append("signature",r),e.next=7,fetch("https://uxcandy.com/~shapoval/test-task-backend/edit/".concat(n,"/?developer=").concat(t),{method:"POST",body:o});case 7:return i=e.sent,e.next=10,i.json();case 10:if(s=e.sent,c=s.status,u=s.message,"error"!==c){e.next=14;break}throw new Error(u);case 14:return e.next=16,u;case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}(),Q=function(e,t){var n=Object.keys(e).sort().reduce(function(t,n){var a=encodeURIComponent(n),r=encodeURIComponent(e[n]);return Object(m.a)({},t,Object(I.a)({},a,r))},{}),a=Object.keys(n).reduce(function(e,t){return e+(n[t]?"".concat(t,"=").concat(n[t],"&"):"")},"");return G()("".concat(a,"token=").concat(t))},V=W,X=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleClick=function(e){n.modalRef.current.openModal()},n.saveTask=function(){var e=Object(M.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{K(b,t)}catch(n){console.error(n),w(n.message)}case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.modalRef=r.a.createRef(),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"add-task"},r.a.createElement(p.Button,{className:"add-task-btn",onClick:this.handleClick},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"),r.a.createElement(S,{ref:this.modalRef,onSubmit:this.saveTask}))}}]),t}(a.Component),Y=function(e){return function(t){t({type:"SET_TASKS",payload:e})}},$=function(e){return function(t){t({type:"SET_TOTAL_TASK_COUNT",payload:e})}},ee=function(e){return function(t){t({type:"SET_SORT_FIELD",payload:e})}},te=function(e){return function(t){t({type:"SET_SORT_DIRECTION",payload:e})}},ne=function(e){return function(t){t({type:"SET_PAGE",payload:e})}},ae=(n(374),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).loadData=function(){var e=Object(M.a)(N.a.mark(function e(t){var a,r,o,i,s,c,u,l,d,f,p;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n.props,r=a.sortField,o=a.sortDirection,i=a.page,s=a.setTasks,c=a.setTotalTaskCount,u=(t=t||{sortField:r,sortDirection:o,page:i})?{sort_field:t.sortField,sort_direction:t.sortDirection,page:t.page}:null,e.next=6,H(b,u);case 6:l=e.sent,d=l.tasks,f=l.total_task_count,p=+f,n.setState({tasks:d,totalTaskCount:p}),s(d),c(p),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),w(e.t0.message),console.error(e.t0);case 18:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t){return e.apply(this,arguments)}}(),n.onPaginationChange=function(e){var t=n.props,a=t.sortField,r=t.sortDirection,o=t.page,i=t.setPage,s=Object(m.a)({},{sortField:a,sortDirection:r,page:o},{page:e});i(e),n.loadData(s)},n.onFilter=function(e){var t=n.props,a=t.sortField,r=t.sortDirection,o=t.page,i=t.setSortField,s=t.setSortDirection;null===e.sortField&&(e.sortDirection=null);var c=Object.keys(e);c.includes("sortField")&&i(e.sortField),c.includes("sortDirection")&&s(e.sortDirection);var u=Object(m.a)({},{sortField:a,sortDirection:r,page:o},e);n.loadData(u)},n.openEditModal=function(e){n.editigModalRef.current.openModal(e)},n.onEdit=function(e){var t=e.id,a={text:e.text,status:e.status},r=n.state.tasks.find(function(e){return e.id===t}),o=Object.keys(a).reduce(function(e,t){var n=a[t];return r[t]!==n?Object(m.a)({},e,Object(I.a)({},t,n)):e},{});Object.keys(o).length&&V(b,t,o),n.loadData()},n.state={tasks:e.tasks,totalTaskCount:e.totalTaskCount},n.editigModalRef=r.a.createRef(),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData(null)}},{key:"render",value:function(){var e=this,t=this.state,n=t.tasks,a=t.totalTaskCount,o=a-3>0;return r.a.createElement("div",{id:"task-list"},r.a.createElement("div",{className:"tools"},a>0&&r.a.createElement(L,{onFilter:this.onFilter}),r.a.createElement(X,null)),n.map(function(t,n){return r.a.createElement(q,{key:n,data:t,onEdit:e.openEditModal})}),o&&r.a.createElement(p.Pagination,{onCurrentChange:this.onPaginationChange,layout:"prev, pager, next",pageSize:3,total:a}),0===a&&r.a.createElement("div",{className:"not-tasks-msg"},r.a.createElement("span",null,"\u0417\u0430\u0434\u0430\u0447 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442")),r.a.createElement(S,{ref:this.editigModalRef,editingMode:!0,onSubmit:this.onEdit}))}}]),t}(a.Component)),re=Object(f.b)(function(e){var t=e.toJS();return{tasks:t.tasks,totalTaskCount:t.totalTaskCount,sortField:t.sortField,sortDirection:t.sortDirection,page:t.page}},function(e){return{setTasks:function(t){return e(Y(t))},setTotalTaskCount:function(t){return e($(t))},setSortField:function(t){return e(ee(t))},setSortDirection:function(t){return e(te(t))},setPage:function(t){return e(ne(t))}}})(ae),oe=(n(375),function(){return r.a.createElement("main",null,r.a.createElement(re,null))}),ie=(n(376),n(377),function(e){return r.a.createElement(T.a,null)}),se=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(_,null),r.a.createElement(oe,null),r.a.createElement(ie,null))},ce=n(42),ue=n(130),le=n(131),de=n(132),fe=Object(de.combineReducers)({isAuthorized:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"SET_AUTHORIZED":return!0;case"SET_UNAUTHORIZED":return!1;default:return e}},totalTaskCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOTAL_TASKS_COUNT":return t.payload;default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TASKS":return t.payload;default:return e}},sortField:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT_FIELD":return t.payload;default:return e}},sortDirection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT_DIRECTION":return t.payload;default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PAGE":return t.payload;default:return e}}}),pe=n(65).default.fromJS({tasks:[],totalTaskCount:0,isAuthorized:!1,sortField:null,sortDirection:P.ASC,page:1});n(382);i.a.render(r.a.createElement(f.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe;return Object(ce.createStore)(fe,e,Object(ue.composeWithDevTools)(Object(ce.applyMiddleware)(le.a)))}()},r.a.createElement(se,null)),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.d27ca005.chunk.js.map